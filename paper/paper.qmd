---
title: "Forecasting the 2024 US Presidential Election: A Poll-Based Approach"
subtitle: "My subtitle if needed"
author: 
  - Xinxiang Gao
  - Ariel Xing
  - John Zhang
thanks: "Code and data are available at: [https://github.com/xgao28/election_forecast](https://github.com/xgao28/election_forecast)."
date: today
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
toc: true
number-sections: true
bibliography: references.bib
---



```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(skimr)
library(knitr)
library(GGally)
library(dplyr)
```


# Introduction

Overview paragraph

Estimand paragraph

Results paragraph

Why it matters paragraph

Telegraphing paragraph: The remainder of this paper is structured as follows. 

```{r}
#| echo: false
#| message: false
#| warning: false
#| include: false
data <- read.csv("../data/02-analysis_data/cleaned_president_polls.csv")
skim(data)
```


```{r pairplot}
#| warning: false
#| message: false
#| echo: false
#| label: fig-multicol
numeric_data <- data %>% 
  select(where(is.numeric)) %>% 
  select(numeric_grade, pollscore, transparency_score) %>% 
  filter(complete.cases(.))


# Create a pair plot
ggpairs(numeric_data) +
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1, size = 8, margin = margin(t = 10)),
    axis.text.y = element_text(size = 8, margin = margin(r = 10)),
    strip.text = element_text(size = 6)  # Adjusts the size of variable name tags
  )
```


```{r}
#| warning: false
#| message: false
#| echo: false
#| label: fig-pct
data %>% filter(candidate_name %in% c("Kamala Harris", "Donald Trump")) %>% 
  mutate(end_date = as.Date(end_date, format = "%m/%d/%y")) %>% 
  filter(end_date > as.Date("2024-01-01")) %>% 
  ggplot(aes(x = end_date, y = pct, color = candidate_name, group = candidate_name)) +
  geom_point(alpha = 0.2) +
  geom_smooth() +
  labs(
    title = "Polling Percentage over Time by Candidate",
    x = "End Date",
    y = "Polling Percentage (%)",
    color = "Candidate"
  ) +
  scale_color_manual(values = c("Kamala Harris" = "blue", "Donald Trump" = "red")) +
  theme_minimal() +
  scale_x_date(date_breaks = "3 months", date_labels = "%b %Y") +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

```







```{r}
#| echo: false
#| message: false
#| warning: false
```


## Predictor variables

Add graphs, tables and text.

Use sub-sub-headings for each outcome variable and feel free to combine a few into one if they go together naturally.


```{r}
#| echo: false
#| message: false
#| warning: false
candidate_names <- c("Kamala Harris", "Donald Trump")

# Define a function to fit the model and return the summary for each candidate
fit_model <- function(candidate) {
  candidate_data <- data %>%
    filter(candidate_name == candidate)
  
  model <- lm(pct ~ pollscore + transparency_score + sample_size + state + days_towards_election, data = candidate_data)
  
  summary(model)
}

# Apply the function to each distinct candidate name and store the summaries in a list
model_summaries <- candidate_names %>%
  set_names() %>%
  map(fit_model)

# Print model summaries for each candidate
model_summaries
```





# Model

The goal of our modelling strategy is twofold. Firstly,...

Here we briefly describe the Bayesian analysis model used to investigate... Background details and diagnostics are included in [Appendix -@sec-model-details].

## Model set-up

Define $y_i$ as the number of seconds that the plane remained aloft. Then $\beta_i$ is the wing width and $\gamma_i$ is the wing length, both measured in millimeters.  

\begin{align} 
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \alpha + \beta_i + \gamma_i\\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\gamma &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}

We run the model in R [@citeR] using the `rstanarm` package of @rstanarm. We use the default priors from `rstanarm`.


### Model justification

We expect a positive relationship between the size of the wings and time spent aloft. In particular...

We can use maths by including latex between dollar signs, for instance $\theta$.


# Results

Our results are summarized in @tbl-modelresults.

```{r}
#| echo: false
#| message: false
#| warning: false
```

```{r}
#| echo: false
#| message: false
#| warning: false
```




# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

Please don't use these as sub-heading labels - change them to be what your point actually is.

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix
# Appendix {-}

# Pollster Methodology Overview and Evaluation: YouGov

YouGov is a global public opinion and data company that conducts online surveys on a variety of topics, including politics, social issues, and consumer behavior. Founded in 2000, YouGov is known for leveraging technology to conduct large-scale online surveys, combining traditional sampling principles with advanced data analytics to measure public opinion efficiently.

## Population, Frame, and Sample

- **Population**: The population refers to the group of individuals whose opinions YouGov aims to measure. For political surveys, this often includes eligible voters in a specific country (e.g., registered U.S. voters). Other surveys may focus on specific demographic groups, such as young adults or industry professionals.

- **Frame**: The frame is a list from which the sample is drawn. YouGov uses its online panel, consisting of millions of registered users worldwide. For specific surveys, the frame is the subset of panel members matching desired criteria (e.g., age, location).

- **Sample**: The sample is a subset of the population selected to participate in a survey. Political surveys often involve 1,000-3,000 respondents, weighted to match the demographic characteristics of the broader population.

## Sample Recruitment

- **Recruitment Process**: YouGov recruits panel members via online advertisements, partnerships, and social media. Individuals join the panel by registering on the YouGov website and completing a demographic profile.

- **Incentives**: Panel members earn rewards through a points-based system, which can be redeemed for cash, gift cards, or other benefits.

## Sampling Approach and Trade-offs

- **Sampling Method**: YouGov employs a non-probability sampling approach using quota sampling combined with statistical weighting. Respondents are selected to fill quotas based on demographics (age, gender, education, region) that align with the population.

- **Advantages of Quota Sampling**:
  - **Cost-effective**: Less expensive than random sampling due to online recruitment and automation.
  - **Speed**: Enables quick data collection, crucial for tracking fast-changing opinions.
  - **Targeted Sampling**: Can focus on hard-to-reach populations or specific demographics.

- **Limitations of Quota Sampling**:
  - **Selection Bias**: Self-selection into the panel may introduce biases, as panel members might differ from the general population (e.g., more engaged online).
  - **Generalizability Issues**: Weighting may not fully adjust for attitudinal differences between panelists and the public.

## Handling Non-Response

- **Mitigation Strategies**: YouGov reduces non-response bias with flexible survey completion times and reminder emails. Statistical weighting adjusts for demographic discrepancies caused by non-response.

- **Weighting**: Survey data are weighted to match demographic distributions (e.g., age, gender, race, education). Additional adjustments may be made for political affiliation or past voting behavior.

## Questionnaire Design

- **Strengths**:
  - **Clarity**: Questions are straightforward and easy to understand, reducing measurement error.
  - **Consistency**: Surveys follow a standardized format, ensuring consistency over time, important for tracking changes in opinion.

- **Weaknesses**:
  - **Limited Depth**: Online surveys may feature shorter questionnaires to avoid fatigue, limiting topic depth.
  - **Response Options**: The design of response options (e.g., including "Don't Know") can influence results, potentially leading to different conclusions.

## Evaluation of YouGov's Methodology

YouGov's methodology provides several strengths, such as cost, speed, and accessibility, making it suitable for political polling and market research. Online panels enable rapid data collection and targeted sampling. However, the reliance on non-probability sampling introduces biases. While weighting can mitigate some issues, it may not fully compensate for differences between panelists and the general population.

- **Strengths**:
  - **Efficient**: Cost-effective and quick data collection.
  - **Adaptable**: Can rapidly capture opinions on evolving issues.
  - **Targeted**: Capable of reaching niche demographics or regions.

- **Weaknesses**:
  - **Selection Bias**: Potential biases due to non-probability sampling.
  - **Non-Response Bias**: Some groups may be less likely to participate.
  - **Questionnaire Limitations**: Less depth compared to other survey methods.

Overall, YouGov’s approach satisfies many standards for modern survey research. Although it has limitations, the insights gained are valuable when these are taken into account.

# **Appendix: Methodology and Survey Design for 2024 U.S. Presidential Election Forecast**

---

## **Appendix A: Methodology**

This section details the **idealized methodology** used to conduct a national survey to forecast the 2024 U.S. presidential election. The methodology includes **sampling strategies, recruitment methods, data validation techniques, and poll aggregation** procedures.

---

### **1. Sampling Approach**

- **Total Sample Size**: 10,000 respondents
- **Distribution by State**:
  - **Minimum 100 respondents per state** (including Washington, D.C.) to ensure balanced regional representation.
  - **Oversampling in battleground states** (e.g., Georgia, Pennsylvania, Arizona) with **1,000 respondents per state** for more precise insights.

- **Stratified Random Sampling**:
  - Stratify by **age, gender, race/ethnicity, education, income, and region**.
  - Ensure proportional representation based on **U.S. Census data** to avoid bias.

- **Weighting Strategy**:
  - Apply **post-stratification weighting** to adjust for any sampling imbalance, aligning with national demographics.

---

### **2. Recruitment Plan**

- **Recruitment Channels**:
  - Use **YouGov, Qualtrics**, and **MTurk** to access pre-screened online panels.
  - Complement with **social media ads** on Facebook, Instagram, and LinkedIn to reach underrepresented groups.

- **Incentives**:
  - Offer **$10 gift cards** or entry into sweepstakes to increase participation and engagement.

---

### **3. Survey Implementation and Design**

- **Survey Platform**: Google Forms  
  - **Link**: *(Insert Google Forms survey link here)*  
  - Accessible to respondents via **email, social media, and direct recruitment channels**.

- **Survey Structure**:
  1. **Demographics Section**: Age, gender, race/ethnicity, income, education, and state of residence.
  2. **Voting Preferences Section**: Candidate choice, likelihood of voting, and party affiliation.
  3. **Key Issues Section**: Identify priority issues (e.g., economy, healthcare, immigration).
  4. **Thank You Message**:  
     - *“Thank you for completing the survey! Your input is greatly appreciated and will help provide insights into the upcoming 2024 election.”*

---

### **4. Data Validation**

- **Techniques for Data Quality**:
  1. **Screening Questions**: Confirm eligibility (e.g., 18+ years old, registered voter status).
  2. **Attention Checks**: Include a question like *“Please select ‘Agree’ for this item”* to verify respondents are attentive.
  3. **IP Geolocation**: Validate state residency based on reported location.
  4. **Duplicate Detection**: Identify and remove duplicate responses.

---

### **5. Poll Aggregation and Reporting**

- **Poll Aggregation**:  
  - Combine results with data from **YouGov, Marquette, and other reliable sources** for a robust forecast.
  - Use **weighted averages** to account for differences in sample size and demographics.

- **Margin of Error**:  
  - **National Margin of Error**: ±1% at the 95% confidence level.  
  - **State-Level Margins**: ±5-10% depending on the sample size for each state.

---

### **6. Budget Allocation**

| **Expense**                     | **Estimated Cost**  |
|----------------------------------|---------------------|
| Panel Provider Fees              | $60,000             |
| Participant Incentives           | $20,000             |
| Social Media Advertising         | $10,000             |
| Google Forms (Platform)          | Free                |
| Data Validation & Analysis       | $8,000              |
| Miscellaneous Expenses           | $2,000              |
| **Total**                        | **$100,000**        |

---

## **Appendix B: Survey Questions**

Below is the full content of the survey to be implemented using Google Forms:

### **Survey Questions**

#### **Section 1: Demographics**
1. **What is your age?**  
   - 18-24  
   - 25-34  
   - 35-44  
   - 45-54  
   - 55-64  
   - 65+  

2. **What is your gender?**  
   - Male  
   - Female  
   - Non-binary/Other  

3. **What is your race/ethnicity?** (Select all that apply)  
   - White  
   - Black or African American  
   - Hispanic or Latino  
   - Asian  
   - Indigenous (Native American, Alaska Native, or First Nations)  
   - Pacific Islander or Native Hawaiian  
   - Other (please specify)  

4. **What is your household income?**  
   - Less than $25,000  
   - $25,000 - $49,999  
   - $50,000 - $99,999  
   - $100,000 or more  

5. **Which state do you currently reside in?**  
   - (List all 50 states + Washington, D.C.)

---

#### **Section 2: Voting Preferences**
6. **Are you a registered voter?**  
   - Yes  
   - No  
   - Not sure  

7. **How likely are you to vote in the 2024 presidential election?**  
   - Definitely will vote  
   - Probably will vote  
   - Probably will not vote  
   - Definitely will not vote  

8. **If the 2024 election were held today, who would you vote for?**  
   - Kamala Harris (Democrat)  
   - Donald Trump (Republican)  
   - Other (Please specify)  
   - Undecided  

9. **How favorable are your opinions of the following candidates?**  
   (Rate on a scale of 1 to 5)  
   - Kamala Harris  
   - Donald Trump  
   - Any third-party candidates  

---

#### **Section 3: Key Issues**
10. **What is the most important issue for you in this election?**  
   - Economy  
   - Healthcare  
   - Immigration  
   - Climate change  
   - Social Security and Medicare  
   - Foreign policy  

11. **Which candidate do you think would handle the economy better?**  
   - Kamala Harris  
   - Donald Trump  
   - Not sure  

---

#### **Thank You Message**
*“Thank you for completing the survey! Your input is greatly appreciated and will help provide insights into the upcoming 2024 election.”*

---

## **Appendix C: Google Forms Link**

Once the survey is created, insert the **Google Forms link** here for participants to access.


https://forms.gle/2MGYeZavDsCNuWZ1A

# Model details {#sec-model-details}

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows...

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows... 

```{r}
#| echo: false
#| message: false
#| warning: false
```

## Diagnostics

@fig-stanareyouokay-1 is a trace plot. It shows... This suggests...

@fig-stanareyouokay-2 is a Rhat plot. It shows... This suggests...

```{r}
#| echo: false
#| message: false
#| warning: false
```



\newpage


# References


